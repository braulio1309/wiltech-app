(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1969:function(e,a,t){"use strict";t.r(a);var r=t(77),s=t.n(r),n=t(16),o=t(117),i=t.n(o);function l(e,a,t,r,s,n,o){try{var i=e[n](o),l=i.value}catch(e){return void t(e)}i.done?a(l):Promise.resolve(l).then(r,s)}var u={name:"ProfileEdit",mounted:function(){n.c.index(),this.actualInfo()},data:function(){return{user:{fname:"",lname:"",name:"",username:"",email:"",password:"",address1:"",address2:"",company_name:"",profile_image:"",mobile_no:"",country:"",state:"",city:"",pincode:"",role:"",gender:"",dob:"",url:"",bio:"",phone:""},success:!1,currentPassword:"",countries:[{value:"Canada",text:"Canada"},{value:"Niada",text:"Niada"},{value:"USA",text:"USA"},{value:"India",text:"India"},{value:"Africa",text:"Africa"}],states:[{value:"California",text:"California"},{value:"Florida",text:"Florida"},{value:"Georgia",text:"Georgia"},{value:"Connecticut",text:"Connecticut"},{value:"Louisiana",text:"Louisiana"}]}},methods:{onSubmit:function(){this.user.name=this.user.fname+" "+this.user.lname,this.$firestoreRefs.user.update(this.user).then((function(){n.c.showSnackbar("success","User has been added successfully.")})),this.$router.replace("/user/user-list")},previewImage:function(e){var a,t=this;return(a=s.a.mark((function a(){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.user.profile_image=e.target.files[0];case 1:case"end":return a.stop()}}),a)})),function(){var e=this,t=arguments;return new Promise((function(r,s){var n=a.apply(e,t);function o(e){l(n,r,s,o,i,"next",e)}function i(e){l(n,r,s,o,i,"throw",e)}o(void 0)}))})()},changePassword:function(){},saveData:function(){var e=this,a=new FormData;a.append("name",this.user.name),a.append("email",this.user.email),a.append("bio",this.user.bio),a.append("phone",this.user.phone),a.append("profile_image",this.user.profile_image),console.log(a);var t=JSON.parse(localStorage.getItem("user"));i.a.put("/api/auth/update/"+t.id,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(a){console.log("user updated:",a.data),e.success=!0,setTimeout((function(){e.success=!1}),5e3),localStorage.setItem("user",JSON.stringify(a.data.user))})).catch((function(e){console.error("Error creating reparation:",e)}))},savePassword:function(){var e={password:this.user.password},a=JSON.parse(localStorage.getItem("user"));i.a.put("/api/auth/update/"+a.id,e).then((function(e){console.log("user updated:",e.data)})).catch((function(e){console.error("Error creating reparation:",e)}))},actualInfo:function(){this.user.name=JSON.parse(localStorage.getItem("user")).name,this.user.email=JSON.parse(localStorage.getItem("user")).email,this.user.phone=JSON.parse(localStorage.getItem("user")).phone,this.user.bio=JSON.parse(localStorage.getItem("user")).bio,this.user.profile_image=JSON.parse(localStorage.getItem("user")).profile_image}}},c=t(8),d=Object(c.a)(u,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("b-container",{attrs:{fluid:""}},[t("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(a){var r=a.handleSubmit;return[t("form",{on:{submit:function(a){return a.preventDefault(),r(e.onSubmit)}}},[t("b-row",[t("b-col",{attrs:{lg:"12"}},[t("iq-card",{attrs:{"body-class":"p-0"},scopedSlots:e._u([{key:"body",fn:function(){return[t("div",{staticClass:"iq-edit-list"},[t("tab-nav",{staticClass:"iq-edit-profile d-flex",attrs:{pills:!0}},[t("tab-nav-items",{staticClass:"col-md-3 p-0",attrs:{active:!0,href:"#personal-information",title:"Información personal"}}),e._v(" "),t("tab-nav-items",{staticClass:"col-md-3 p-0",attrs:{active:!1,href:"#chang-pwd",title:"Cambiar contraseña"}})],1)],1)]},proxy:!0}],null,!0)})],1),e._v(" "),t("b-col",{attrs:{lg:"12"}},[t("div",{staticClass:"iq-edit-list-data"},[t("tab-content",{attrs:{id:"pills-tabContent-2"}},[t("tab-content-item",{attrs:{active:!0,id:"personal-information"}},[t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v("Información personal")])]},proxy:!0},{key:"body",fn:function(){return[e.success?t("div",{staticClass:"col-12"},[t("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[e._v("\n                        Datos guardados correctamente\n                      ")])]):e._e(),e._v(" "),t("b-row",{attrs:{"align-v":"center"}},[t("b-form-group",{staticClass:"col-md-12",attrs:{label:"Nombre completo","label-for":"fname"}},[t("ValidationProvider",{attrs:{name:"Nombre completo",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"First Name"},model:{value:e.user.name,callback:function(a){e.$set(e.user,"name",a)},expression:"user.name"}}),e._v(" "),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1),e._v(" "),t("b-form-group",{staticClass:"col-md-12",attrs:{label:"Email","label-for":"uname"}},[t("ValidationProvider",{attrs:{name:"User name",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"email",placeholder:"Email"},model:{value:e.user.email,callback:function(a){e.$set(e.user,"email",a)},expression:"user.email"}}),e._v(" "),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1),e._v(" "),t("b-form-group",{staticClass:"col-md-12",attrs:{label:"Telefono","label-for":"uname"}},[t("ValidationProvider",{attrs:{name:"phone",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Telefono"},model:{value:e.user.phone,callback:function(a){e.$set(e.user,"phone",a)},expression:"user.phone"}}),e._v(" "),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1),e._v(" "),t("b-form-group",{staticClass:"col-md-12",attrs:{label:"Telefono","label-for":"uname"}},[t("ValidationProvider",{attrs:{name:"bio"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("b-form-textarea",{class:r.length>0?" is-invalid":"",attrs:{type:"text",placeholder:"Biografía"},model:{value:e.user.bio,callback:function(a){e.$set(e.user,"bio",a)},expression:"user.bio"}}),e._v(" "),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1)],1),e._v(" "),t("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary"},on:{click:e.saveData}},[e._v("Guardar")])]},proxy:!0}],null,!0)})],1),e._v(" "),t("tab-content-item",{attrs:{active:!1,id:"chang-pwd"}},[t("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[t("h4",{staticClass:"card-title"},[e._v("Cambiar contraseña")])]},proxy:!0},{key:"body",fn:function(){return[t("b-form-group",[t("label",{attrs:{for:"cpass"}},[e._v("Contraseña actual:")]),e._v(" "),t("b-form-input",{attrs:{type:"password",id:"cpass"},on:{focusout:function(a){return e.changePassword()}},model:{value:e.currentPassword,callback:function(a){e.currentPassword=a},expression:"currentPassword"}})],1),e._v(" "),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Nueva contraseña:","label-for":"pass"}},[t("ValidationProvider",{attrs:{name:"Password",rules:"confirmed:repeat_password"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"password",placeholder:"Contraseña"},model:{value:e.user.password,callback:function(a){e.$set(e.user,"password",a)},expression:"user.password"}}),e._v(" "),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1),e._v(" "),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Repita la contraseña:","label-for":"rpass"}},[t("ValidationProvider",{attrs:{vid:"repeat_password",name:"Repeat Password",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.errors;return[t("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"password",placeholder:"Repetir contraseña"},model:{value:e.user.repeat_password,callback:function(a){e.$set(e.user,"repeat_password",a)},expression:"user.repeat_password"}}),e._v(" "),t("div",{staticClass:"invalid-feedback"},[t("span",[e._v(e._s(r[0]))])])]}}],null,!0)})],1),e._v(" "),t("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary"},on:{click:e.savePassword}},[e._v("Guardar")])]},proxy:!0}],null,!0)})],1)],1)],1)])],1)],1)]}}])})],1)}),[],!1,null,null,null);a.default=d.exports},77:function(e,a,t){e.exports=t(661)}}]);
//# sourceMappingURL=57.js.map